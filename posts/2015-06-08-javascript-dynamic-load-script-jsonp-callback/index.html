<!DOCTYPE html>
<html lang="en"><head>
    





<title>JavaScript - Dynamic Load script || JSONP Callback | tedshd&#39;s DevNote</title>

<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content='JavaScript - Dynamic Load script || JSONP Callback Intro Sometimes we need dynamic load script or handle jsonp callback And we need handle script onload or jsonp callback onload or something error How to do? Use onload, onerror method Code if (typeof UTIL == &#39;undefined&#39; || !UTIL) { var UTIL = {}; } UTIL.createEl = { get: function(sTag, oAttr, handleOnLoad, handleError) { var el = document.createElement(sTag); for (var i in'>
<meta name="keywords" content=''>
<meta name="msapplication-TileColor" content="#b91d47">
<meta name="theme-color" content="#ffffff">

<link rel="canonical" href="http://blog.tedshd.io/posts/2015-06-08-javascript-dynamic-load-script-jsonp-callback/" />
<link rel="apple-touch-icon" sizes="180x180" href='/apple-touch-icon.png'>
<link rel="icon" type="image/png" sizes="32x32" href='/favicon-32x32.png'>
<link rel="icon" type="image/png" sizes="16x16" href='/favicon-16x16.png'>
<link rel="manifest" href='/site.webmanifest'>
<link rel="mask-icon" href='/safari-pinned-tab.svg' color="#696969">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">

<meta property="og:title" content="JavaScript - Dynamic Load script || JSONP Callback" />
<meta property="og:description" content="JavaScript - Dynamic Load script || JSONP Callback Intro Sometimes we need dynamic load script or handle jsonp callback And we need handle script onload or jsonp callback onload or something error How to do? Use onload, onerror method Code if (typeof UTIL == &#39;undefined&#39; || !UTIL) { var UTIL = {}; } UTIL.createEl = { get: function(sTag, oAttr, handleOnLoad, handleError) { var el = document.createElement(sTag); for (var i in" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://blog.tedshd.io/posts/2015-06-08-javascript-dynamic-load-script-jsonp-callback/" />
<meta property="og:image" content="https://s3.amazonaws.com/logdown-production/system/blog/3202/og_image/logdown.png"/>
<meta property="article:published_time" content="2015-06-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-01-29T17:42:46+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://s3.amazonaws.com/logdown-production/system/blog/3202/og_image/logdown.png"/>

<meta name="twitter:title" content="JavaScript - Dynamic Load script || JSONP Callback"/>
<meta name="twitter:description" content="JavaScript - Dynamic Load script || JSONP Callback Intro Sometimes we need dynamic load script or handle jsonp callback And we need handle script onload or jsonp callback onload or something error How to do? Use onload, onerror method Code if (typeof UTIL == &#39;undefined&#39; || !UTIL) { var UTIL = {}; } UTIL.createEl = { get: function(sTag, oAttr, handleOnLoad, handleError) { var el = document.createElement(sTag); for (var i in"/>

<meta itemprop="name" content="">
<meta itemprop="description" content="">
    
    
    
    
    
    <link rel="stylesheet" href='/css/style.css'>

    

</head><body><header id="navigation" class="p-navigation">
    <div class="p-navigation__row">
        <div class="p-navigation__banner">
            <div class="p-navigation__logo">
                <a class="p-navigation__link u-vertically-center p-link--logo" href="http://blog.tedshd.io/">
                    tedshd&#39;s DevNote
                </a>
            </div>
            
            <a href="#navigation" class="p-navigation__toggle--open" title="menu">
                <i class="p-icon--menu"></i>
            </a>
            <a href="#navigation-closed" class="p-navigation__toggle--close" title="close menu">
                <i class="p-icon--close"></i>
            </a>
        </div>

        <nav class="p-navigation__nav">
            <span class="u-off-screen">
                <a href="#main-content">Jump to main content</a>
            </span>

            <ul class="p-navigation__items" role="menu">
                
                <li class="p-navigation__item" role="menuitem">
                    <a class="p-navigation__link" href="http://blog.tedshd.io/categories">Categories</a>
                </li>
                
                <li class="p-navigation__item" role="menuitem">
                    <a class="p-navigation__link" href="http://blog.tedshd.io/tags">tags</a>
                </li>
                
            </ul>

            
            <form class="p-search-box" action="https://www.google.com/search" target="_blank">
    <input type="search" class="p-search-box__input" name="q" placeholder='Search'
        required="" aria-label="Query">
    <input type="hidden" name="sitesearch" value="http://blog.tedshd.io/">
    <button type="reset" class="p-search-box__reset" alt="reset" aria-label="Reset">
        <i class="p-icon--close"></i>
    </button>
    <button type="submit" class="p-search-box__button" alt="search" aria-label="Search">
        <i class="p-icon--search"></i>
    </button>
</form>
            
        </nav>
    </div>
</header><div id="main-content">
<header class="p-strip page-banner">
    <div class="row">
        <h1>JavaScript - Dynamic Load script || JSONP Callback</h1>
    </div>

    

<div class="row">

    
    <div class="col-8">
        




<div class="p-media-object">

    

    <div class="p-media-object__details">

        

        
        <p class="p-media-object__content">
            <span class="u-capitalized">on</span>
            2015-06-08
        </p>
        

    </div>
</div>


    </div>
    

    

</div>




</header>

<section class="p-strip is-shallow">
    <main class="row post-content">
        <h2 id="javascript---dynamic-load-script--jsonp-callback">JavaScript - Dynamic Load script || JSONP Callback</h2>
<h3 id="intro">Intro</h3>
<p>Sometimes we need dynamic load script or handle jsonp callback</p>
<p>And we need handle script onload or jsonp callback onload or something error</p>
<h3 id="how-to-do">How to do?</h3>
<p>Use <code>onload</code>, <code>onerror</code> method</p>
<h3 id="code">Code</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">UTIL</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;undefined&#39;</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">UTIL</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">UTIL</span> <span style="color:#f92672">=</span> {};
}
<span style="color:#a6e22e">UTIL</span>.<span style="color:#a6e22e">createEl</span> <span style="color:#f92672">=</span> {
    <span style="color:#a6e22e">get</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">sTag</span>, <span style="color:#a6e22e">oAttr</span>, <span style="color:#a6e22e">handleOnLoad</span>, <span style="color:#a6e22e">handleError</span>) {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">el</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">createElement</span>(<span style="color:#a6e22e">sTag</span>);
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">oAttr</span>) {
            <span style="color:#a6e22e">el</span>[<span style="color:#a6e22e">i</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">oAttr</span>[<span style="color:#a6e22e">i</span>];
        }
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">handleOnLoad</span>) {
            <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">onload</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">handleOnLoad</span>;
        }
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">handleError</span>) {
            <span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">onerror</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">handleError</span>;
        }
        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">append</span>(<span style="color:#a6e22e">el</span>);
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">el</span>;
    },
    <span style="color:#a6e22e">append</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">dNode</span>) {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">dHead</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementsByTagName</span>(<span style="color:#e6db74">&#39;head&#39;</span>)[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">body</span>;
        <span style="color:#a6e22e">dHead</span>.<span style="color:#a6e22e">appendChild</span>(<span style="color:#a6e22e">dNode</span>);
    },
    <span style="color:#a6e22e">remove</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">dNode</span>) {
        <span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span>() {
            <span style="color:#a6e22e">dNode</span>.<span style="color:#a6e22e">parentNode</span>.<span style="color:#a6e22e">removeChild</span>(<span style="color:#a6e22e">dNode</span>);
            <span style="color:#a6e22e">dNode</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
        }, <span style="color:#ae81ff">0</span>);
    },
    <span style="color:#a6e22e">js</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">sUrl</span>, <span style="color:#a6e22e">handleOnLoad</span>, <span style="color:#a6e22e">handleError</span>) {
        <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">dNode</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;script&#39;</span>, {
            <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">sUrl</span>,
            <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;text/javascript&#39;</span>
        }, <span style="color:#a6e22e">handleOnLoad</span>, <span style="color:#a6e22e">handleError</span>);
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">dNode</span>;
    },
    <span style="color:#a6e22e">css</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">sUrl</span>, <span style="color:#a6e22e">sMedia</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">sMedia</span>) {
            <span style="color:#a6e22e">sMedia</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;all&#39;</span>;
        }
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;link&#39;</span>, {
            <span style="color:#e6db74">&#39;href&#39;</span><span style="color:#f92672">:</span><span style="color:#a6e22e">sUrl</span>,
            <span style="color:#e6db74">&#39;rel&#39;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;stylesheet&#39;</span>,
            <span style="color:#e6db74">&#39;type&#39;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#39;text/css&#39;</span>,
            <span style="color:#e6db74">&#39;media&#39;</span><span style="color:#f92672">:</span><span style="color:#a6e22e">sMedia</span>
        });
    }
};
</code></pre></div><h3 id="example">Example</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">run</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;OK&#39;</span>);
},
<span style="color:#a6e22e">errorHandle</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Error&#39;</span>);
};
<span style="color:#a6e22e">UTIL</span>.<span style="color:#a6e22e">createEl</span>.<span style="color:#a6e22e">js</span>(<span style="color:#e6db74">&#39;http://tysh310246.blogspot.com/feeds/posts/default?alt=json&amp;callback=myFunction&#39;</span>, <span style="color:#a6e22e">run</span>, <span style="color:#a6e22e">errorHandle</span>);

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">myFunction</span> (<span style="color:#a6e22e">data</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>);
}
</code></pre></div><p><a href="http://unixpapa.com/js/dyna.html">Refer - JavaScript Madness: Dynamic Script Loading</a>
<a href="http://www.kvzhuang.net/posts/245327-script-loading-issue">Refer - Script Loading issue « 小莊記事</a></p>

    </main>
</section>


<footer class="p-strip is-wrapper">
    <div class="row">
        <div class="p-article-pagination">
    

    
    <a class="p-article-pagination__link--previous" href="http://blog.tedshd.io/posts/2015-05-15-docker-mac-research-log/">
        <span class="p-article-pagination__label">Previous</span>
        <span class="p-article-pagination__title">
            Docker - Mac research log
        </span>
    </a>
    

    
    <a class="p-article-pagination__link--next" href="http://blog.tedshd.io/posts/2015-06-16-linux-set-encoding-in-linux-environment/">
        <span class="p-article-pagination__label">Next</span>
        <span class="p-article-pagination__title">
            Linux - Set Encoding In Linux Environment
        </span>
    </a>
    
</div>
    </div>
</footer>



<div class="p-strip u-no-padding--bottom is-shallow">
    <div class="row">
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "tedshd" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
</div>



        </div><footer class="p-strip is-shallow page-footer">
    <div class="row">
        <div class="col-12  u-align--center">
            <p>
                © 2020 Tedshd
            </p>
        </div>
    </div>
</footer>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-49247550-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




</body>
</html>
